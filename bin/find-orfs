#!/bin/sh

#Finding ORF and trimming STOP codon since its not part of ORF and wont be translated

cd "${0%/*}"

for filename in ../outputs/*.output
do
basename "$filename"
f="$(basename -- $filename)"
grep -oPi 'ATG(.{3}(?<!TAG|TAA|TGA)){50,}?(T(A(A|G)|GA)){1}' ${filename} | \
sed 's/\(.*\).../\1/' > ../outputs/${f}.ORFS
sed -i '/N/d' ../outputs/${f}.ORFS 	#eliminating all orfs with N in seq
sed -i '/n/d' ../outputs/${f}.ORFS 	#eliminating all orfs with n in seq
cat ../outputs/${f}.ORFS
done
